Initializing Vertex AI with project: perfect-lantern-466808-i1, location: us-central1
Analyzing video: /Users/rahul.rana1/Documents/personal/agentic-ai-hack/agents/video_processor/videos/crowd_fire.mp4
Sampling every 30 frames
File already exists in bucket: gs://video-analysis-ai-hack-perfect-lantern-466808-i1/crowd_fire.mp4

=== FIRE/SMOKE DETECTION DEBUG ===

--- METHOD 1: LABEL DETECTION ---
Frame labels found: 0

Checking segment labels (2 found):
  - 'crowd' (confidence: 0.000)
  - 'urban area' (confidence: 0.000)

Checking shot labels (2 found):
  - 'urban area' (confidence: 0.000)
  - 'crowd' (confidence: 0.000)

Total labels found: 4

--- METHOD 2: OBJECT DETECTION FALLBACK ---
Objects detected: 93
  Object: 'person' (confidence: 0.973)
  Object: 'person' (confidence: 0.939)
  Object: 'person' (confidence: 0.968)
  Object: 'person' (confidence: 0.931)
  Object: 'person' (confidence: 0.975)
  Object: 'person' (confidence: 0.981)
  Object: 'person' (confidence: 0.858)
  Object: 'person' (confidence: 0.890)
  Object: 'pants' (confidence: 0.838)
  Object: 'person' (confidence: 0.812)
  Object: 'person' (confidence: 0.813)
  Object: 'person' (confidence: 0.935)
  Object: 'person' (confidence: 0.842)
  Object: 'dog' (confidence: 0.730)
  Object: 'pants' (confidence: 0.643)
  Object: 'person' (confidence: 0.752)
  Object: 'pants' (confidence: 0.527)
  Object: 'top' (confidence: 0.597)
  Object: 'person' (confidence: 0.879)
  Object: 'luggage & bags' (confidence: 0.644)
  Object: 'person' (confidence: 0.777)
  Object: 'person' (confidence: 0.844)
  Object: 'person' (confidence: 0.902)
  Object: 'pants' (confidence: 0.647)
  Object: 'luggage & bags' (confidence: 0.610)
  Object: 'person' (confidence: 0.952)
  Object: 'luggage & bags' (confidence: 0.617)
  Object: 'person' (confidence: 0.950)
  Object: 'person' (confidence: 0.818)
  Object: 'person' (confidence: 0.916)
  Object: 'top' (confidence: 0.583)
  Object: 'luggage & bags' (confidence: 0.628)
  Object: 'dog' (confidence: 0.748)
  Object: 'pants' (confidence: 0.701)
  Object: 'top' (confidence: 0.556)
  Object: 'pants' (confidence: 0.573)
  Object: 'luggage & bags' (confidence: 0.696)
  Object: 'pants' (confidence: 0.699)
  Object: 'luggage & bags' (confidence: 0.652)
  Object: 'person' (confidence: 0.843)
  Object: 'person' (confidence: 0.785)
  Object: 'luggage & bags' (confidence: 0.635)
  Object: 'person' (confidence: 0.905)
  Object: 'person' (confidence: 0.858)
  Object: 'lighting' (confidence: 0.511)
  Object: 'pants' (confidence: 0.554)
  Object: 'person' (confidence: 0.784)
  Object: 'person' (confidence: 0.985)
  Object: 'footwear' (confidence: 0.594)
  Object: 'pants' (confidence: 0.563)
  Object: 'dog' (confidence: 0.715)
  Object: 'person' (confidence: 0.773)
  Object: 'luggage & bags' (confidence: 0.627)
  Object: 'building' (confidence: 0.633)
  Object: 'person' (confidence: 0.827)
  Object: 'person' (confidence: 0.821)
  Object: 'person' (confidence: 0.931)
  Object: 'person' (confidence: 0.788)
  Object: 'person' (confidence: 0.815)
  Object: 'pants' (confidence: 0.564)
  Object: 'dress' (confidence: 0.603)
  Object: 'person' (confidence: 0.816)
  Object: 'pants' (confidence: 0.747)
  Object: 'person' (confidence: 0.900)
  Object: 'luggage & bags' (confidence: 0.643)
  Object: 'backpack' (confidence: 0.663)
  Object: 'car' (confidence: 0.990)
  Object: 'person' (confidence: 0.919)
  Object: 'person' (confidence: 0.845)
  Object: 'dress' (confidence: 0.539)
  Object: 'person' (confidence: 0.837)
  Object: 'dog' (confidence: 0.726)
  Object: 'person' (confidence: 0.832)
  Object: 'person' (confidence: 0.810)
  Object: 'person' (confidence: 0.787)
  Object: 'person' (confidence: 0.860)
  Object: 'outerwear' (confidence: 0.532)
  Object: 'person' (confidence: 0.905)
  Object: 'luggage & bags' (confidence: 0.598)
  Object: 'luggage & bags' (confidence: 0.608)
  Object: 'dress' (confidence: 0.589)
  Object: 'person' (confidence: 0.802)
  Object: 'person' (confidence: 0.886)
  Object: 'person' (confidence: 0.834)
  Object: 'car' (confidence: 0.862)
  Object: 'person' (confidence: 0.840)
  Object: 'luggage & bags' (confidence: 0.596)
  Object: 'luggage & bags' (confidence: 0.595)
  Object: 'animal' (confidence: 0.715)
  Object: 'luggage & bags' (confidence: 0.656)
  Object: 'sneakers' (confidence: 0.565)
  Object: 'person' (confidence: 0.810)
  Object: 'person' (confidence: 0.867)

--- METHOD 3: VISUAL CUES & EMERGENCY INDICATORS ---
Explicit content frames: 29

--- METHOD 4: SCENE CONTEXT INFERENCE ---
  - Timestamp 0s: Large crowd detected (94 people)
  - Timestamp 1s: Large crowd detected (90 people)
  - Timestamp 2s: Large crowd detected (80 people)
  - Timestamp 3s: Large crowd detected (82 people)
  - Timestamp 4s: Large crowd detected (105 people)
  - Timestamp 5s: Large crowd detected (94 people)
  - Timestamp 6s: Large crowd detected (82 people)
  - Timestamp 7s: Emergency lighting detected
  - Timestamp 7s: Large crowd detected (91 people)
  - Timestamp 8s: Large crowd detected (95 people)
  - Timestamp 9s: Large crowd detected (80 people)
  - Timestamp 10s: Large crowd detected (70 people)
  - Timestamp 11s: Large crowd detected (77 people)
  - Timestamp 12s: Large crowd detected (86 people)
  - Timestamp 13s: Large crowd detected (67 people)
  - Timestamp 14s: Large crowd detected (72 people)
  - Timestamp 15s: Large crowd detected (65 people)
  - Timestamp 16s: Large crowd detected (52 people)
  - Timestamp 17s: Large crowd detected (33 people)
  - Timestamp 18s: Large crowd detected (27 people)
  - Timestamp 19s: Large crowd detected (36 people)
  - Timestamp 20s: Large crowd detected (48 people)
  - Timestamp 21s: Large crowd detected (41 people)
  - Timestamp 22s: Large crowd detected (32 people)
  - Timestamp 23s: Large crowd detected (39 people)
  - Timestamp 24s: Large crowd detected (49 people)
  - Timestamp 25s: Large crowd detected (52 people)
  - Timestamp 26s: Large crowd detected (48 people)
  - Timestamp 27s: Large crowd detected (40 people)
  - Timestamp 28s: Large crowd detected (33 people)

Final fire/smoke detections: 29
  - Timestamp 0s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 1s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 2s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 3s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 4s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 5s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 6s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 7s: emergency_lighting_detected (confidence: 0.600, method: context_inference)
  - Timestamp 8s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 9s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 10s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 11s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 12s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 13s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 14s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 15s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 16s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 17s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 18s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 19s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 20s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 21s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 22s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 23s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 24s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 25s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 26s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 27s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
  - Timestamp 28s: large_crowd_emergency_situation (confidence: 0.400, method: crowd_analysis)
=== END DEBUG ===

Timestamp-wise Analysis Results:
[
  {
    "timestamp": 0,
    "people_count": 8,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_0.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 1,
    "people_count": 8,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_1.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 2,
    "people_count": 7,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_2.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 3,
    "people_count": 8,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_3.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 4,
    "people_count": 8,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_4.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 5,
    "people_count": 8,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_5.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 6,
    "people_count": 7,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_6.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 7,
    "people_count": 8,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "emergency_lighting_detected",
    "fire_smoke_confidence": 0.6,
    "fire_smoke_snapshot": "snapshot_7.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 8,
    "people_count": 8,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_8.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 9,
    "people_count": 8,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_9.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 10,
    "people_count": 7,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_10.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 11,
    "people_count": 7,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_11.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 12,
    "people_count": 7,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_12.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 13,
    "people_count": 7,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_13.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 14,
    "people_count": 7,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_14.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 15,
    "people_count": 7,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_15.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 16,
    "people_count": 7,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_16.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 17,
    "people_count": 6,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_17.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 18,
    "people_count": 6,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_18.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 19,
    "people_count": 6,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_19.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 20,
    "people_count": 6,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_20.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 21,
    "people_count": 5,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_21.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 22,
    "people_count": 3,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_22.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 23,
    "people_count": 3,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_23.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 24,
    "people_count": 4,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_24.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 25,
    "people_count": 4,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_25.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 26,
    "people_count": 4,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_26.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 27,
    "people_count": 5,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_27.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  },
  {
    "timestamp": 28,
    "people_count": 5,
    "violence_flag": false,
    "violence_type": null,
    "violence_snapshot": null,
    "fire_smoke_flag": true,
    "fire_smoke_type": "large_crowd_emergency_situation",
    "fire_smoke_confidence": 0.4,
    "fire_smoke_snapshot": "snapshot_28.jpg",
    "age_group": {},
    "crying_faces": 0,
    "crying_faces_snapshot": null
  }
]
